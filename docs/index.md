# Releasing with Havoc (Conventional Havoc)

Havoc is a process (and a couple of
[scripts](https://github.com/MicahElliott/havoc/bin)) to make git commits that
are consistent, categorical, and will present optimally in a ğŸš€ "Release Doc".
It uses short plain-text emoji prefixes (`:sparkles:`, `:bug:`, etc) in place
of the traditional ones (`feature:`, `fix:`, etc). This convention guide
describes the "spec" for crafting such commits, and dovetails with [ğŸ“…
CalVer](https://calver.org/) by describing the _Features_, _Fixes_,
_Miscellaneous_, _Breaking Changes_, and _Crisis_ categories made in commit
messages.

Note that developers don't need to know anything about Havoc to achieve its
benefits â€” **developers only need to know how to write a _subject_ line in a
commit using an emoji prefix**, as documented in the [Commits](#commits)
section below.

These conventions are well suited for large projects with heavy process, and
for very basic single-developer projects. It supports but does not require
PRs/MRs, stories, issues, or any process at all (other than use of the
standard _prefixes_).

By adopting these conventions, you get:

- generated Release Docs with standard
- pretty and identifiable commits displayed in Github and elsewhere
- opportunities for further automation

Installing and using the scripts is covered in the
[ğŸ“š Project README](https://github.com/MicahElliott/havoc).

This guide aims to be similar to
[Conventional Commits](https://www.conventionalcommits.org).

## Terms

- **Release Doc** â€” an emoji-beautified Markdown file posted alongside releases
- **Category** â€” one of five top-level buckets that commits fall into in a
  Release Doc
  (ğŸ†• ğŸ§‘â€ğŸ”§ ğŸ’£ â˜„ ğŸ§º)
- **Prefix** â€” one of ~30 emoji for each commit subject
- **Topic** â€” ad hoc optional label following a prefix
- **Ticket** â€” a number or PR associated with a commit

## Commits

There are many good standards out there prescribing commit message rules. Adopt
one and stick to it. Most of them boil down to something like
[this gist](https://gist.github.com/turbo/efb8d57c145e00dc38907f9526b60f17):

> 1. Commit messages must have a subject line and may have body copy, separated by a blank line.
> 2. The subject line must not exceed 68 (50 originally) characters
> 3. The subject line should be capitalized and must not end in a period
> 4. The subject line must be written in imperative mood (Fix, not Fixed / Fixes etc.)
> 5. The body copy must be wrapped at 72 columns
> 6. The body copy must only contain explanations as to what and why, never how.

Those rules should apply regardless of any tools you choose.

Havoc is focused just on the _subject line_ and thus the first four rules,
and its particularly short (and mostly intuitive) prefixes make it easy.

An example:

```
:sparkles: [xyz] Add new frob to the whatzit (#123)
```

Each commit starts with an emoji _"prefix"_ written as text, like:
`:sparkles:` (meaning: new feature). There are ~30 of these prefixes. They can
be memorized, or written on a sticky note, used in a `.gitmessage` template,
completed by your editor, and be supported by other tooling. They must be at
the beginning of the subject. You can use just a small subset of them if you
like, but more diversity makes your releases more interesting/appealing.

An optional feature _"topic"_ like `[xyz]` highlights a project or area you're
working on. Tools like Magit already do special things with this syntax. (It
can go anywhere on the line, but be consistent.)

A very short imperative sentence follows to describe _"what"_. By the time
you've subtracted the length of other fields, you have about 50 characters
left for this sentence.

Finally, a _"ticket"_ (or _story_ if you prefer) number is an optional suffix
(though its location is not enforced). Many tools can auto-link these in some
contexts.

That brings us to this spec:

```
:emoji: [topic] Short imperative WHAT sentence (#ticket)
```

And also supports a very minimal message like this example:

```
:sparkles: Add new frob to the whatzit
```

## The Release Doc Hierarchy

The following shows the full release doc as generated by the Havoc scripts.
There is a page title showing the _release name_; a generated _Overview_; and
five top-level sections (AKA _Buckets_), each with a list of the prefixes that
get filtered into them. See one of Havoc's [recent
releases](https://github.com/MicahElliott/havoc/releases/tag/v2025.02.20) for
a real example of a generated release.

### ğŸš€ v2025.02.17 Release  <!-- (also ğŸ“£ /  ğŸ“€ / ğŸ¥ / ğŸº / ğŸ€ ) -->

This section is just the title of the release.

### ğŸ““ Overview  <!-- (or Summary, ğŸ“£ ) -->

This overview is usually generated by an LLM looking over the full-length
commit messages.

The next five sections are the _"Category buckets"_ that each commit prefix is
grouped into.

### ğŸ†• Features <!-- (or `mushroom`) -->

- âœ¨ -- `sparkles` -- feature
- ğŸ‰ -- `tada` -- begin project or major feature
- ğŸš§ -- `construction` -- WIP, progress on incomplete feature
- âš¡ -- `zap` -- perf (also `racehorse/rabbit`)
- â™¿ -- `wheelchair` -- accessibility
- ğŸ’„ -- `lipstick` -- UI
- ğŸ”¤ -- `abc` -- i18n
- ğŸ“š -- `books` -- docs/comments (also `memo`)
- ğŸ”’ -- `lock` -- security/privacy

### ğŸ§‘â€ğŸ”§ Fixes (problems/brokenness)

- ğŸ› -- `bug`
- ğŸ—‘ -- `wastebasket` -- remove (or `scissors/axe`)

### ğŸ§º Other/Misc basket  <!-- (or ğŸ¥…) (non-user facing) -->

- ğŸ€ -- `rat` -- tests (also `lab_coat/test_tube`)
- ğŸ -- `flags` -- feature flag
- ğŸ’‚ -- `guard` -- compiler/linter/CI problem (temporary) (also ğŸš¨ / ğŸ””/ ğŸ‘Š/ â›”)
- ğŸ“’ -- `ledger` -- logs (also `satellite/mag`)
- ğŸ“¦ -- `package` -- update deps (`arrow_up`)
- â™» -- `recycle` -- refactor/move things (also `truck`)
- ğŸ’© -- `poop` -- write bad code (OR remove code?)
- ğŸ”§ -- `wrench` -- config (also `hammer`)
- ğŸ§± -- `bricks` -- infra
- ğŸ”‘ -- `key` -- secrets
- ğŸ‘½ -- `alien` -- 3rd-party API changes
- ğŸ¤– -- `robot` -- automation
- âš— -- `alembic` -- experiments
- ğŸ©º -- `stethoscope` -- health-check
- ğŸ§µ -- `thread` -- concurrency

### ğŸ’£ Breaking Changes  <!-- (or ğŸ’” / ğŸ’¥) -->

- ğŸ’¥ -- `boom` -- breaking change

### â˜„ Crises

- ğŸš‘ -- `ambulance` -- critical hot-fix
- âª -- `rewind` -- revert

## FAQs

### How were the prefixes chosen?

They are short single word emoji, and thus fit into a short commit line.

### Why not just stick with the Gitmoji standard?

While Havoc was inspired and partially derived from
[Gitmoji](https://github.com/carloscuesta/gitmoji), I was put off by a few
things about it:

- Gitmoji has 73 prefixes to learn; that feels like too many
- many of the emoji are multiple words and too long for commit messages
  (`:twisted_rightwards_arrow:`, `:globe_with_meridians:`, etc)
- the tooling is slow and onerous to expect all devs to install

### Why did you increase the subject length max up to 68 chars?

That's what Magit prescribes, and I find it more reasonable than 50. And when
you use any spec with pre-/suffixes, you end up with only ~50 chars for a
descriptive sentence anyway. And, IME, it's challenging to get developers to
even keep it under 100.

### Why write the text form of each emoji (eg, `:sparkles:`) instead of the actual glyph?

The text form can be displayed and processed by various tools that don't fully
support emoji. The havoc process is still valid this way even if anyone wants
nothing to do with emoji. I can't think of much not to like about them since
they are often displayed iconically by tools that choose to, but don't need to
we written as such. Well, the obvious downside is that a word like `sparkles`
is much less meaningful than `feature`.

### Can I use traditional prefixes instead of emoji?

Actually, yes. They work fine with the tooling. There are fewer to choose from
and are a little boring, but using Havoc scripts on an existing project is a
great way to start. See the _Prior Art_ section below for the list of standard
traditionals.

## How is Conventional Havoc (CH) better than Conventional Commits (CC)?

CC's prefies are redundant. Or they can't follow the imperative form. Here are
a few options for the same example, all being sub-par.

```
fix: fix the email to customer       # redundant
fix: the email to customer           # not imperative
fix: unbreak the email to customer   # forced imperative
```

With CH, it is more natural, and the prefix feels like more of a supplement:

```
:bug: Fix the email to customer
```

## Other supporting tools

- [Captain](https://github.com/MicahElliott/captain/blob/main/bin/msglint)
  has a git commit message linter that requires conformance to Havoc
  conventions
- Captain can also generate much of a commit from just a branch name
- [Git](https://git-scm.com/) itself supports a `.gitmessage` template file
  where a commented spec can be shown during message writing
- [Magit](https://magit.vc/) (for Emacs) highlights topics and enforces a
  68-char subject line
- Havoc scripts generate a Release Doc from conforming commits

## Prior Art Inspiration

- [Angular Standard](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines)
- [CommitLint](https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional)

Those prescribe something close to the following, where each prefix is also the
release doc category:

```
  'build',
 ('chore',)
  'ci',
  'docs',
  'feat',
  'fix',
  'perf',
  'refactor',
 ('revert',)
  'style',
  'test'
```
